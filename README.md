# Targetbot ‚Äî —ç—Ç–∞–ø 17: –∞–≤—Ç–æ–æ—Ç—á—ë—Ç—ã, CSV –∏ weekly-—Å–≤–æ–¥–Ω–∏–∫

–ü—Ä–æ–µ–∫—Ç ¬´CI ‚Üí GitHub ‚Üí Cloudflare Workers ‚Üí Telegram-–±–æ—Ç –æ—Ç—á—ë—Ç–æ–≤ –ø–æ —Ä–µ–∫–ª–∞–º–µ Meta¬ª —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –ø–æ—ç—Ç–∞–ø–Ω–æ. –ü–æ—Å–ª–µ –∫–∞—Ä–∫–∞—Å–∞,
—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —á–∞—Ç–æ–≤, –º–∞—Å—Ç–µ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π, KPI, –∞–≤—Ç–æ–ø–∞—É–∑—ã, —É—á—ë—Ç–∞ –æ–ø–ª–∞—Ç, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Meta OAuth, —Ä—É—á–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
`/report`/`/digest` –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –æ—Ç—á—ë—Ç–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∫—Ä–æ–Ω-—Ü–∏–∫–ª: –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∏ –æ—Ç—á—ë—Ç–æ–≤ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
–æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Ç–æ–ø–∏–∫–∏, –ø—Ä–∏–∫–ª–∞–¥—ã–≤–∞—é—Ç CSV, –ø–∏—à—É—Ç –∞—Ä—Ö–∏–≤ –≤ KV –∏, –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `GS_WEBHOOK`, –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç
–¥–∞–Ω–Ω—ã–µ –≤ Google Sheets. –ü–æ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Å–≤–æ–¥–Ω–∏–∫ ¬´–ø—Ä–æ—à–ª–∞—è –Ω–µ–¥–µ–ª—è + —Å–µ–≥–æ–¥–Ω—è/–≤—á–µ—Ä–∞¬ª —Å–æ–≥–ª–∞—Å–Ω–æ
–Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –ø—Ä–æ–µ–∫—Ç–∞.

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ.** –í—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –∏–∑ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –≤–µ—Ç–∫–∏ `work` –≤ –æ—Å–Ω–æ–≤–Ω—É—é –≤–µ—Ç–∫—É `main`. –¢–µ–ø–µ—Ä—å –∏–º–µ–Ω–Ω–æ `main`
—Å–æ–¥–µ—Ä–∂–∏—Ç —Å–≤–µ–∂–∏–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏, –∏ –µ—ë —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è.

## –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ
- –í–æ—Ä–∫–µ—Ä (`src/index.js`) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã `/health`, `/`, `/tg`, `/fb_auth`, `/fb_cb`, `/fb_debug`, `/p/{code}`.
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π OAuth Meta: `fb_auth` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞, `fb_cb` –æ–±–º–µ–Ω–∏–≤–∞–µ—Ç –∫–æ–¥ –Ω–∞ –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–π —Ç–æ–∫–µ–Ω, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å –∏
  —Å—Ä–∞–∑—É –ø–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä—É–µ—Ç —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –≤ KV.
- –í `/tg` –¥–æ—Å—Ç—É–ø–Ω—ã –∫–æ–º–∞–Ω–¥—ã `/start`, `/help`, `/register`, `/admin`, `/report`, `/digest`:
  - `/start` –∏ `/help` –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫—Ä–∞—Ç–∫—É—é —Å–ø—Ä–∞–≤–∫—É.
  - `/register`, –≤—ã–∑–≤–∞–Ω–Ω—ã–π –≤–Ω—É—Ç—Ä–∏ –Ω—É–∂–Ω–æ–≥–æ —Ç–æ–ø–∏–∫–∞, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `chat_id` –∏ `message_thread_id` –≤ KV (`DB`) –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø—Ä–∏–≤—è–∑–∫—É.
- `/admin` –≤—ã–≤–æ–¥–∏—Ç –ø–∞–Ω–µ–ª—å —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º Meta, —Ä–∞–∑–¥–µ–ª–æ–º ¬´–ê–∫–∫–∞—É–Ω—Ç—ã Meta¬ª, —Å–ø–∏—Å–∫–æ–º —á–∞—Ç–æ–≤ –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤.
- –†–∞–∑–¥–µ–ª ¬´–ê–∫–∫–∞—É–Ω—Ç—ã Meta¬ª –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤, –¥–∞—ë—Ç –∫–Ω–æ–ø–∫—É ¬´–ü–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å¬ª, –∞ `/fb_debug` –≤—ã–≤–æ–¥–∏—Ç
  —Ç–æ–∫–µ–Ω, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏ —Å—á—ë—Ç—á–∏–∫–∏ `/me/adaccounts` –∏ `/me/businesses`.
- `/report <–∫–æ–¥> [period]` –≥–æ—Ç–æ–≤–∏—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á—ë—Ç –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –ø–µ—Ä–∏–æ–¥—É (–∫–∞–º–ø–∞–Ω–∏–∏, spend, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, CPL/CPA) –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ
  –≤ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π —á–∞—Ç –ø—Ä–æ–µ–∫—Ç–∞. –ü–µ—Ä–∏–æ–¥ –±–µ—Ä—ë—Ç—Å—è –∏–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –ª–∏–±–æ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ–µ–∫—Ç–∞.
- `/digest <–∫–æ–¥> [period]` —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∫–æ—Ä–æ—Ç–∫–∏–π –¥–∞–π–¥–∂–µ—Å—Ç —Å —Å—É–º–º–∞—Ä–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏ —Ç—Ä–µ–º—è –∏–Ω—Å–∞–π—Ç–∞–º–∏ (—Ç–æ–ø –ø–æ spend, –ª—É—á—à–∏–π CPA,
  –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø—Ä–æ –∞–Ω–∞–ª–∏—Ç–∏–∫—É). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ –ø–µ—Ä–∏–æ–¥—ã –∏ Meta-—Ç–æ–∫–µ–Ω, —á—Ç–æ –∏ `/report`.
- –ö–Ω–æ–ø–∫–∞ ¬´üì§ –û—Ç—á—ë—Ç¬ª –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–µ–Ω—é —Ñ–∏–ª—å—Ç—Ä–æ–≤: –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ø–µ—Ä–∏–æ–¥, –∑–∞–¥–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞—Å—Ö–æ–¥, –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å
  –ø–æ–∫–∞–∑ –∫–∞–º–ø–∞–Ω–∏–π –±–µ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ —Ä–µ—à–∏—Ç—å, –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á—ë—Ç. –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω–∫–µ (–±–µ–∑ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ —á–∞—Ç–µ), –∞
  –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Ç–µ –∂–µ —Ñ–∏–ª—å—Ç—Ä—ã –∫ —Å–æ–æ–±—â–µ–Ω–∏—é –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞.
- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (`scheduled`) –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –ø—Ä–æ–±–µ–≥–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç—ã: –∞–∫—Ç–∏–≤–Ω—ã–µ –∏ –Ω–µ ¬´paused¬ª –ø–æ–ª—É—á–∞—é—Ç –∞–≤—Ç–æ–æ—Ç—á—ë—Ç –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é —Å
  –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–º CSV, –∑–∞–ø–∏—Å—å—é –≤ –∞—Ä—Ö–∏–≤ `report:<code>:<ts>` –∏ (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `GS_WEBHOOK`) –æ—Ç–ø—Ä–∞–≤–∫–æ–π –¥–∞–Ω–Ω—ã—Ö –≤ Google Sheets; –ø–æ
  –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–≤–æ–¥–Ω–∏–∫ ¬´–Ω–µ–¥–µ–ª—è + —Å–µ–≥–æ–¥–Ω—è/–≤—á–µ—Ä–∞¬ª —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ weekly.
- –ò–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏ –ø–∞–Ω–µ–ª–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π: —á–∞—Ç—ã –∏ –ø—Ä–æ–µ–∫—Ç—ã –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ KV —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–∫–∞
  —Å–æ–æ–±—â–∞—é—Ç –æ –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
- –ö–∞—Ä–∫–∞—Å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞ (`project:<code>`) –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π (`state:<uid>`) –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏.
- –î–æ–±–∞–≤–ª–µ–Ω –º–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞: –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –ø–æ—è–≤–∏–ª–∞—Å—å –∫–Ω–æ–ø–∫–∞ ¬´‚ûï –ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç¬ª. –ú–∞—Å—Ç–µ—Ä –ø–æ —à–∞–≥–∞–º –ø—Ä–æ—Å–∏—Ç —É–∫–∞–∑–∞—Ç—å –∫–æ–¥,
  –≤—ã–±—Ä–∞—Ç—å —á–∞—Ç/—Ç–æ–ø–∏–∫ –∏–∑ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö, –≤–≤–µ—Å—Ç–∏ `act_` —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞, –∑–∞—Ç–µ–º –≤—ã–±—Ä–∞—Ç—å –ø–µ—Ä–∏–æ–¥ –æ—Ç—á—ë—Ç–æ–≤ –∏ —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ
  —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–ø—Ä–µ—Å–µ—Ç—ã –ª–∏–±–æ —Ä—É—á–Ω–æ–π –≤–≤–æ–¥). –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ KV –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ ¬´–ü—Ä–æ–µ–∫—Ç—ã¬ª.
- –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –º–∞—Å—Ç–µ—Ä –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∏–ª–ª–∏–Ω–≥: –≤—ã–±—Ä–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ ¬´–∞–∫—Ç–∏–≤–µ–Ω¬ª/¬´–ø–∞—É–∑–∞¬ª, –æ—Ç–º–µ—Ç–∏—Ç—å –æ–ø–ª–∞—Ç—É ¬´—Å–µ–≥–æ–¥–Ω—è¬ª,
  –≤–≤–µ—Å—Ç–∏ –¥–∞—Ç—É –≤—Ä—É—á–Ω—É—é (—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å—á—ë—Ç–æ–º —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–ª–∞—Ç–µ–∂–∞) –∏–ª–∏ –æ—á–∏—Å—Ç–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è.
- –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –º–∞—Å—Ç–µ—Ä–∞ ‚Äî –ø–µ—Ä–≤–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ KPI: –∫–Ω–æ–ø–∫–∞–º–∏ –∑–∞–¥–∞—é—Ç—Å—è CPL, –ª–∏–¥—ã/–¥–µ–Ω—å –∏ –±—é–¥–∂–µ—Ç/–¥–µ–Ω—å, –µ—Å—Ç—å –±—ã—Å—Ç—Ä—ã–π —Å–±—Ä–æ—Å –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏
  –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –∑–Ω–∞—á–µ–Ω–∏–π –ø—Ä—è–º–æ –≤ Telegram.
- –®–∞–≥ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–ª–µ—Ä—Ç–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∫–ª—é—á–∏—Ç—å –∏–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –≤—ã–±—Ä–∞—Ç—å –ø—Ä–µ—Å–µ—Ç –æ–∫–æ–Ω (`10:00`, `10/14/18`) –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å
  zero-spend –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –¥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞.
- –§–∏–Ω–∞–ª—å–Ω—ã–π —à–∞–≥ –º–∞—Å—Ç–µ—Ä–∞ –¥–∞—ë—Ç —Å—Ä–∞–∑—É –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–æ—Ç—á—ë—Ç—ã, –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–µ–∂–∏–º –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ —Å–≤–æ–¥–Ω–∏–∫–∞ (¬´–Ω–µ–¥–µ–ª—è+—Å–µ–≥–æ–¥–Ω—è¬ª
  –∏–ª–∏ ¬´–Ω–µ–¥–µ–ª—è+–≤—á–µ—Ä–∞¬ª) –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–ø–∞—É–∑—É: –¥–æ—Å—Ç—É–ø–Ω—ã –ø—Ä–µ—Å–µ—Ç—ã 2/3/5/7/10 –¥–Ω–µ–π, —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ –∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ.
- –ú–∞—Å—Ç–µ—Ä –∑–∞—â–∏—â—ë–Ω –æ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç –∫–æ–¥–∞, –¥—É–±–ª–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
  —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏ –≤—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞. –õ—é–±–æ–π —à–∞–≥ –º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –∫–Ω–æ–ø–∫–æ–π ¬´–û—Ç–º–µ–Ω–∞¬ª. –ü—Ä–∏ —Ä—É—á–Ω–æ–º –≤–≤–æ–¥–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
  —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏.
- –°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–æ–ª—É—á–∏–ª –∫–Ω–æ–ø–∫–∏ ¬´‚öôÔ∏è –∫–æ–¥¬ª, –æ—Ç–∫—Ä—ã–≤–∞—é—â–∏–µ –∫–∞—Ä—Ç–æ—á–∫—É –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫–∫–∞—É–Ω—Ç, —á–∞—Ç,
  —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, KPI, —Å—Ç–∞—Ç—É—Å—ã —Å–≤–æ–¥–Ω–∏–∫–∞, –∞–≤—Ç–æ–ø–∞—É–∑—ã –∏ –∞–ª–µ—Ä—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ –¥–∞—Ç—ã –æ–ø–ª–∞—Ç.
- –ò–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ –º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞: –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å –∞–≤—Ç–æ–æ—Ç—á—ë—Ç—ã, —Å—Ç–∞–≤–∏—Ç—å –±–∏–ª–ª–∏–Ω–≥ –Ω–∞ –ø–∞—É–∑—É, –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —Å–≤–æ–¥–Ω–∏–∫,
  –∞–≤—Ç–æ–ø–∞—É–∑—É –ø–æ KPI, –∑–∞–ø—É—Å–∫–∞—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è, KPI –∏ –∞–ª–µ—Ä—Ç–æ–≤.
- –†–µ–¥–∞–∫—Ç–æ—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–µ–º—ë–Ω, –±—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤, –≤–≤–æ–¥ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏,
  –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤ –æ—Ç—á—ë—Ç–∞ –∏ —Ç–∏—Ö–∏—Ö –≤—ã—Ö–æ–¥–Ω—ã—Ö. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ KV –∏ —Å—Ä–∞–∑—É –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.
- –†–µ–¥–∞–∫—Ç–æ—Ä KPI –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞: –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å CPL, —Ü–µ–ª–µ–≤—ã–µ –ª–∏–¥—ã –≤ –¥–µ–Ω—å –∏ –¥–Ω–µ–≤–Ω–æ–π –±—é–¥–∂–µ—Ç, –æ—á–∏—Å—Ç–∏—Ç—å –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∏–ª–∏
  –æ—Ç–º–µ–Ω–∏—Ç—å –≤–≤–æ–¥. –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ä–∞–∑—É –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∫–∞—Ä—Ç–æ—á–∫–µ.
- –î–æ–±–∞–≤–ª–µ–Ω —Ä–µ–¥–∞–∫—Ç–æ—Ä –∞–≤—Ç–æ–ø–∞—É–∑—ã: –∑–∞–¥–∞–≤–∞–π—Ç–µ –ø–æ—Ä–æ–≥ (–ø—Ä–µ—Å–µ—Ç—ã 2/3/5/7/10 –¥–Ω–µ–π, –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Å–±—Ä–æ—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), –æ—Ç–∫–ª—é—á–∞–π—Ç–µ
  —Ä–µ–∂–∏–º –∏–ª–∏ –º–µ–Ω—è–π—Ç–µ –µ–≥–æ –ø—Ä—è–º–æ –∏–∑ Telegram. –ü—Ä–∏ –≤–≤–æ–¥–µ ¬´–Ω–µ—Ç¬ª –∞–≤—Ç–æ–ø–∞—É–∑–∞ –≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è.
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —É—á—ë—Ç –æ–ø–ª–∞—Ç: –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –ø–æ—è–≤–∏–ª—Å—è —Ä–∞–∑–¥–µ–ª ¬´üíµ –û–ø–ª–∞—Ç–∞¬ª —Å –±—ã—Å—Ç—Ä—ã–º –∑–∞–Ω–µ—Å–µ–Ω–∏–µ–º –ø–ª–∞—Ç–µ–∂–∞ ¬´—Å–µ–≥–æ–¥–Ω—è¬ª, —Ä—É—á–Ω—ã–º –≤–≤–æ–¥–æ–º –¥–∞—Ç,
  —Ä–∞—Å—á—ë—Ç–æ–º —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–ª–∞—Ç–µ–∂–∞ (+1 –º–µ—Å—è—Ü) –∏ –æ—á–∏—Å—Ç–∫–æ–π –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–∏ –≤–≤–æ–¥–µ –¥–∞—Ç –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã `YYYY-MM-DD`, `–î–î.–ú–ú.–ì–ì–ì–ì` –∏
  –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ ¬´—Å–µ–≥–æ–¥–Ω—è¬ª/¬´–≤—á–µ—Ä–∞¬ª. –ú–∞—Å—Ç–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞ —É–º–µ–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å —ç—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –µ—â—ë –¥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞.
- –†–µ–¥–∞–∫—Ç–æ—Ä –∞–ª–µ—Ä—Ç–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —É–ø—Ä–∞–≤–ª—è—Ç—å –æ–∫–Ω–∞–º–∏ billing-–ø—Ä–æ–≤–µ—Ä–æ–∫ (–ø—Ä–µ—Å–µ—Ç—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
  –∏ –∑–∞–¥–∞–≤–∞—Ç—å –≤—Ä–µ–º—è zero-spend –ª–∏–±–æ –æ—Ç–∫–ª—é—á–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ä–∞–∑—É –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∫–∞—Ä—Ç–æ—á–∫–µ.
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –≤—ã–±—Ä–∞—Ç—å –ø–µ—Ä–∏–æ–¥, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, –±–∏–ª–ª–∏–Ω–≥, KPI, –∞–ª–µ—Ä—Ç—ã, –∞–≤—Ç–æ–æ—Ç—á—ë—Ç—ã, weekly-—Å–≤–æ–¥–Ω–∏–∫ –∏ –∞–≤—Ç–æ–ø–∞—É–∑—É;
  –∏—Ç–æ–≥–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –æ –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —à–∞–≥–∞—Ö.
- –í—ã–∑–æ–≤—ã Telegram API –æ–±—ë—Ä–Ω—É—Ç—ã –≤ `fetchWithTimeout`, —á—Ç–æ–±—ã –≤–æ—Ä–∫–µ—Ä –Ω–µ –∑–∞–≤–∏—Å–∞–ª –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö.
- –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Wrangler (`wrangler.toml`) –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ —Ä–∞–±–æ—á–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ `DB` (–±–æ–µ–≤–æ–π namespace `c55f82210ade457c93aff4fe2ba8b007`),
  –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫—Ä–æ–Ω –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç (–¥–ª—è –±—É–¥—É—â–∏—Ö –∑–∞–¥–∞—á) –∏ –≤–∫–ª—é—á–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–∞–∑–¥–µ–ª–µ Observability.
- –°—Ü–µ–Ω–∞—Ä–∏–∏ npm (`npm run dev`, `npm run deploy`) –∏—Å–ø–æ–ª—å–∑—É—é—Ç `npx wrangler@4.46.0`, –ø–æ—ç—Ç–æ–º—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. GitHub Actions workflow –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π –∏–∑ –≤–µ—Ç–∫–∏ `main`.

## –ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ
1. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–≤–µ—Å—Ç–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ KV (`REPORTS_NAMESPACE`, `BILLING_NAMESPACE`, `LOGS_NAMESPACE`) –∏ –¥–æ–±–∞–≤–∏—Ç—å –∏—Ö –≤ `wrangler.toml`.
   –°–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ–¥–∏–Ω—ã–π namespace `DB` (ID `c55f82210ade457c93aff4fe2ba8b007`), —á–µ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —ç—Ç–∞–ø–∞.
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Cloudflare: `BOT_TOKEN`, `ADMIN_IDS`, `FB_APP_ID`, `FB_APP_SECRET`, `DEFAULT_TZ`, `WORKER_URL`,
   `FB_LONG_TOKEN` (–æ–ø—Ü.), `GS_WEBHOOK` (–æ–ø—Ü.). –î–ª—è Meta OAuth –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã `FB_APP_ID`/`FB_APP_SECRET`. –î–∞–∂–µ –µ—Å–ª–∏ `ADMIN_IDS` –ø–æ–∫–∞
   –ø—É—Å—Ç, –¥–æ—Å—Ç—É–ø –∫ –ø–∞–Ω–µ–ª–∏ –≤—Å–µ–≥–¥–∞ —Ä–∞–∑—Ä–µ—à—ë–Ω Telegram-ID `7623982602` (–≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ –∫–æ–¥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).
3. –î–æ–¥–µ–ª–∞—Ç—å –∞–ª–µ—Ä—Ç—ã: –±–∏–ª–ª–∏–Ω–≥/zero-spend, –∞–Ω–æ–º–∞–ª–∏–∏ –º–µ—Ç—Ä–∏–∫, —É—Å—Ç–∞–ª–æ—Å—Ç—å –∫—Ä–µ–∞—Ç–∏–≤–æ–≤, –∞ —Ç–∞–∫–∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–∞—É–∑—ã –∫–∞–º–ø–∞–Ω–∏–π
   –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ KPI (–≤–∫–ª—é—á–∞—è —Ä–µ–∞–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã Meta API –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∞–º).
4. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä –∞—Ä—Ö–∏–≤–∞ –æ—Ç—á—ë—Ç–æ–≤ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ CSV –ø—Ä—è–º–æ –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (–∏—Å—Ç–æ—Ä–∏—è `report:<code>:<ts>`).
5. –°–¥–µ–ª–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –ø–æ—Ä—Ç–∞–ª `/p/{code}?sig=...` —Å HTML-–¥–∞—à–±–æ—Ä–¥–æ–º –∏ –≤—ã–¥–∞—á–µ–π —Å—Å—ã–ª–æ–∫ –∏–∑ –∞–¥–º–∏–Ω–∫–∏.
6. –ü–æ –º–µ—Ä–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å README –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
```bash
# –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä (–Ω—É–∂–Ω—ã ENV –∏ preview KV ID)
npm run dev

# –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤ –¥–µ–ø–ª–æ–π –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–π –∂–µ –∫–æ–º–∞–Ω–¥–æ–π
npm run deploy
```

–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Ä–∞–∑–≤–∏–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ —à–∞–≥–∞–º, –ø—Ä–æ–≤–µ—Ä—è—è –∫–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ –∏ —á–µ—Ä–µ–∑ –¥–µ–ø–ª–æ–π.
