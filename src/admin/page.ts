// This file is generated by scripts/embed-admin.mjs.
// Do not edit it manually ‚Äî edit the HTML/CSS/JS sources instead.
const html = "<!DOCTYPE html>\n<html lang=\"ru\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>TargetBot Admin</title>\n    <script src=\"https://cdn.tailwindcss.com?plugins=forms,typography\"></script>\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" />\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin />\n    <link\n      href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\"\n      rel=\"stylesheet\"\n    />\n    <style>\n      :root {\n  color-scheme: dark;\n  font-family: \"Inter\", system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", sans-serif;\n}\n\nbody {\n  background: #0f172a;\n}\n\n.btn-primary {\n  background: #16a34a;\n  color: #fff;\n  font-weight: 600;\n  padding: 0.5rem 1rem;\n  border-radius: 0.75rem;\n  transition: all 0.2s ease;\n}\n\n.btn-primary:hover {\n  background: #15803d;\n}\n\n.btn-secondary {\n  background: rgba(15, 23, 42, 0.7);\n  color: #e2e8f0;\n  font-weight: 600;\n  padding: 0.5rem 1rem;\n  border-radius: 0.75rem;\n  transition: all 0.2s ease;\n}\n\n.btn-secondary:hover {\n  background: rgba(30, 41, 59, 0.8);\n}\n\n.card {\n  background: rgba(15, 23, 42, 0.65);\n  backdrop-filter: blur(12px);\n  border-radius: 1.25rem;\n  padding: 1.5rem;\n  border: 1px solid rgba(71, 85, 105, 0.6);\n  box-shadow: 0 10px 40px rgba(15, 23, 42, 0.5);\n}\n\n.card-title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n}\n\n.card-value {\n  font-size: 2rem;\n  font-weight: 700;\n  color: #34d399;\n}\n\n.table {\n  width: 100%;\n  border-collapse: collapse;\n}\n\n.table th,\n.table td {\n  padding: 0.75rem 1rem;\n  text-align: left;\n  font-size: 0.95rem;\n  border-bottom: 1px solid rgba(71, 85, 105, 0.4);\n}\n\n.table tbody tr:nth-child(even) {\n  background: rgba(15, 23, 42, 0.4);\n}\n\n.badge {\n  display: inline-flex;\n  align-items: center;\n  padding: 0.25rem 0.75rem;\n  border-radius: 9999px;\n  background: rgba(52, 211, 153, 0.16);\n  color: #6ee7b7;\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-transform: uppercase;\n}\n\n.tabs {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n  padding-bottom: 1.5rem;\n  margin-bottom: 1.5rem;\n  border-bottom: 1px solid rgba(71, 85, 105, 0.4);\n}\n\n.tab-button {\n  padding: 0.5rem 1rem;\n  border-radius: 0.75rem;\n  background: rgba(15, 23, 42, 0.6);\n  font-size: 0.9rem;\n  color: #cbd5f5;\n  transition: all 0.2s ease;\n}\n\n.tab-button:hover {\n  color: #fff;\n  background: rgba(148, 163, 184, 0.2);\n}\n\n.tab-button.active {\n  background: #16a34a;\n  color: #fff;\n  box-shadow: 0 10px 30px rgba(22, 163, 74, 0.35);\n}\n\n.tab-panel {\n  display: none;\n}\n\n.tab-panel.active {\n  display: block;\n}\n\n    </style>\n  </head>\n  <body class=\"bg-slate-950 text-slate-100 font-[Inter]\">\n    <div id=\"app\" class=\"min-h-screen\">\n      <main class=\"max-w-6xl mx-auto px-6 py-10 space-y-8\">\n        <header class=\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\n          <div>\n            <h1 class=\"text-3xl font-semibold\">TargetBot Admin Portal</h1>\n            <p class=\"text-slate-400\">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏.</p>\n          </div>\n          <div class=\"flex items-center gap-3\">\n            <button id=\"refreshMeta\" class=\"btn-primary\">üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å Meta</button>\n            <button id=\"checkWebhook\" class=\"btn-secondary\">üì° –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Webhook</button>\n          </div>\n        </header>\n        <section>\n          <nav class=\"tabs\" role=\"tablist\">\n            <button class=\"tab-button active\" data-target=\"dashboard\">üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>\n            <button class=\"tab-button\" data-target=\"users\">üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>\n            <button class=\"tab-button\" data-target=\"leads\">üí¨ –ó–∞—è–≤–∫–∏</button>\n            <button class=\"tab-button\" data-target=\"integrations\">‚öôÔ∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</button>\n            <button class=\"tab-button\" data-target=\"settings\">üîí –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>\n          </nav>\n          <div class=\"tab-panels\">\n            <section id=\"dashboard\" class=\"tab-panel active\"></section>\n            <section id=\"users\" class=\"tab-panel\"></section>\n            <section id=\"leads\" class=\"tab-panel\"></section>\n            <section id=\"integrations\" class=\"tab-panel\"></section>\n            <section id=\"settings\" class=\"tab-panel\"></section>\n          </div>\n        </section>\n      </main>\n    </div>\n    <script type=\"module\">\n      const headers = () => {\n  const params = new URLSearchParams(window.location.search);\n  const key = params.get(\"key\");\n  const baseHeaders = { \"content-type\": \"application/json\" };\n  if (key) {\n    baseHeaders.Authorization = `Bearer ${key}`;\n  }\n  return baseHeaders;\n};\n\nasync function request(path, options = {}) {\n  const response = await fetch(path, {\n    ...options,\n    headers: {\n      ...headers(),\n      ...(options.headers ?? {}),\n    },\n  });\n  if (!response.ok) {\n    const text = await response.text();\n    throw new Error(`Request failed: ${response.status} ${text}`);\n  }\n  return response.json();\n}\n\nexport const api = {\n  async getLeads() {\n    const key = new URLSearchParams(window.location.search).get(\"key\") ?? \"\";\n    return request(`/api/leads?key=${key}`);\n  },\n  async getUsers() {\n    const key = new URLSearchParams(window.location.search).get(\"key\") ?? \"\";\n    return request(`/api/users?key=${key}`);\n  },\n  async getSettings() {\n    const key = new URLSearchParams(window.location.search).get(\"key\") ?? \"\";\n    return request(`/api/settings?key=${key}`);\n  },\n  async syncMeta() {\n    const key = new URLSearchParams(window.location.search).get(\"key\") ?? \"\";\n    return request(`/meta/sync?key=${key}`, {\n      method: \"POST\",\n      body: JSON.stringify({ ad_account_id: \"act_000000000000000\" }),\n    });\n  },\n  async checkWebhook() {\n    const key = new URLSearchParams(window.location.search).get(\"key\") ?? \"\";\n    return request(`/manage/telegram/webhook?key=${key}`);\n  },\n  async refreshWebhook() {\n    const key = new URLSearchParams(window.location.search).get(\"key\") ?? \"\";\n    return request(`/manage/telegram/webhook?key=${key}&action=refresh`, {\n      method: \"POST\",\n    });\n  },\n};\n\nwindow.TargetBotAdminAPI = api;\n\nconst api = window.TargetBotAdminAPI;\n\nconst dashboard = document.querySelector(\"#dashboard\");\nconst usersPanel = document.querySelector(\"#users\");\nconst leadsPanel = document.querySelector(\"#leads\");\nconst integrationsPanel = document.querySelector(\"#integrations\");\nconst settingsPanel = document.querySelector(\"#settings\");\nconst tabs = document.querySelectorAll(\".tab-button\");\n\nfunction activateTab(targetId) {\n  document.querySelectorAll(\".tab-panel\").forEach((panel) => {\n    panel.classList.toggle(\"active\", panel.id === targetId);\n  });\n  tabs.forEach((tab) => {\n    tab.classList.toggle(\"active\", tab.dataset.target === targetId);\n  });\n}\n\ntabs.forEach((tab) => {\n  tab.addEventListener(\"click\", () => activateTab(tab.dataset.target));\n});\n\nasync function renderDashboard() {\n  dashboard.innerHTML = `<div class=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n    <article class=\"card\">\n      <h2 class=\"card-title\">–õ–∏–¥—ã —Å–µ–≥–æ–¥–Ω—è</h2>\n      <p class=\"card-value\" id=\"leads-today\">‚Äî</p>\n    </article>\n    <article class=\"card\">\n      <h2 class=\"card-title\">Spend Meta</h2>\n      <p class=\"card-value\" id=\"meta-spend\">‚Äî</p>\n    </article>\n    <article class=\"card\">\n      <h2 class=\"card-title\">–°—Ä–µ–¥–Ω–∏–π CPL</h2>\n      <p class=\"card-value\" id=\"meta-cpl\">‚Äî</p>\n    </article>\n    <article class=\"card\">\n      <h2 class=\"card-title\">Webhook</h2>\n      <p class=\"card-value\" id=\"telegram-webhook\">‚Äî</p>\n    </article>\n  </div>`;\n  const [leads, settings] = await Promise.all([api.getLeads(), api.getSettings()]);\n  const leadsToday = leads.leads?.filter((lead) => new Date(lead.createdAt).toDateString() === new Date().toDateString()) ?? [];\n  document.querySelector(\"#leads-today\").textContent = String(leadsToday.length);\n  document.querySelector(\"#meta-spend\").textContent = settings.metaToken?.spend ?? \"‚Äî\";\n  document.querySelector(\"#meta-cpl\").textContent = settings.metaToken?.cpl ?? \"‚Äî\";\n  document.querySelector(\"#telegram-webhook\").textContent = settings.telegramTokenConfigured ? \"–ê–∫—Ç–∏–≤–µ–Ω\" : \"–ù–µ –ø–æ–¥–∫–ª—é—á—ë–Ω\";\n}\n\nasync function renderUsers() {\n  const data = await api.getUsers();\n  usersPanel.innerHTML = `<div class=\"overflow-x-auto\">\n    <table class=\"table\">\n      <thead><tr><th>ID</th><th>–ò–º—è</th><th>Username</th><th>–†–æ–ª—å</th></tr></thead>\n      <tbody>\n        ${data.users\n          .map(\n            (user) => `<tr>\n              <td>${user.id}</td>\n              <td>${user.firstName ?? \"‚Äî\"} ${user.lastName ?? \"\"}</td>\n              <td>${user.username ? \"@\" + user.username : \"‚Äî\"}</td>\n              <td><span class=\"badge\">${user.role}</span></td>\n            </tr>`,\n          )\n          .join(\"\")}\n      </tbody>\n    </table>\n  </div>`;\n}\n\nasync function renderLeads() {\n  const data = await api.getLeads();\n  leadsPanel.innerHTML = `<div class=\"overflow-x-auto\">\n    <table class=\"table\">\n      <thead><tr><th>ID</th><th>–ò–º—è</th><th>–ö–æ–Ω—Ç–∞–∫—Ç</th><th>–°—Ç–∞—Ç—É—Å</th><th>–û–±–Ω–æ–≤–ª–µ–Ω–æ</th></tr></thead>\n      <tbody>\n        ${data.leads\n          .map(\n            (lead) => `<tr>\n              <td>${lead.id}</td>\n              <td>${lead.name}</td>\n              <td>${lead.contact}</td>\n              <td><span class=\"badge\">${lead.status}</span></td>\n              <td>${new Date(lead.updatedAt).toLocaleString()}</td>\n            </tr>`,\n          )\n          .join(\"\")}\n      </tbody>\n    </table>\n  </div>`;\n}\n\nasync function renderIntegrations() {\n  integrationsPanel.innerHTML = `<div class=\"space-y-4\">\n    <section class=\"card\">\n      <h2 class=\"card-title\">Facebook Meta</h2>\n      <p class=\"text-sm text-slate-400\">OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–º–ø–∞–Ω–∏–π.</p>\n      <a class=\"btn-primary inline-flex items-center\" href=\"/auth/facebook\">üîó –ü–æ–¥–∫–ª—é—á–∏—Ç—å Meta</a>\n    </section>\n    <section class=\"card\">\n      <h2 class=\"card-title\">Telegram Webhook</h2>\n      <p class=\"text-sm text-slate-400\">–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫–∞ Telegram.</p>\n      <button class=\"btn-secondary\" id=\"refreshWebhook\">üîÅ –û–±–Ω–æ–≤–∏—Ç—å</button>\n    </section>\n  </div>`;\n  document.querySelector(\"#refreshWebhook\").addEventListener(\"click\", async () => {\n    await api.refreshWebhook();\n    alert(\"–í–µ–±—Ö—É–∫ –æ–±–Ω–æ–≤–ª—ë–Ω\");\n  });\n}\n\nasync function renderSettings() {\n  const settings = await api.getSettings();\n  settingsPanel.innerHTML = `<div class=\"grid gap-4\">\n    <article class=\"card\">\n      <h2 class=\"card-title\">–û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h2>\n      <dl class=\"grid gap-2 text-sm text-slate-300\">\n        <div class=\"flex justify-between\"><dt>Worker URL</dt><dd>${settings.workerUrl ?? \"‚Äî\"}</dd></div>\n        <div class=\"flex justify-between\"><dt>Telegram Token</dt><dd>${settings.telegramTokenConfigured ? \"—Å–∫—Ä—ã—Ç\" : \"‚Äî\"}</dd></div>\n        <div class=\"flex justify-between\"><dt>Facebook App</dt><dd>${settings.facebookAppId ?? \"‚Äî\"}</dd></div>\n      </dl>\n    </article>\n  </div>`;\n}\n\nasync function bootstrap() {\n  await renderDashboard();\n  await renderUsers();\n  await renderLeads();\n  await renderIntegrations();\n  await renderSettings();\n}\n\ndocument.querySelector(\"#refreshMeta\").addEventListener(\"click\", async () => {\n  await api.syncMeta();\n  await renderDashboard();\n  alert(\"–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Meta –≤—ã–ø–æ–ª–Ω–µ–Ω–∞\");\n});\n\ndocument.querySelector(\"#checkWebhook\").addEventListener(\"click\", async () => {\n  const status = await api.checkWebhook();\n  alert(`Webhook: ${status.status}`);\n});\n\nbootstrap().catch((error) => {\n  console.error(error);\n  dashboard.innerHTML = `<div class=\"card\">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ: ${error.message}</div>`;\n});\n\n    </script>\n  </body>\n</html>\n";

export function renderAdminPage() {
  return new Response(html, {
    headers: {
      "content-type": "text/html; charset=utf-8",
      "cache-control": "no-store",
    },
  });
}
